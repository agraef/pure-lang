
// conditional compilation pragmas (Pure 0.49)

// options are enabled by default
#! --disable bar

// nested conditionals
#! --if foo
foo x = x+1; // enabled
#! --if bar
bar x = x-1; // disabled
#! --else
bar x = x/2; // enabled
// double --else gives error
#! --else
let "oops";
#! --endif // bar
baz x = 2*x; // enabled
#! --endif // foo

// unmatched --endif gives error
#! --endif

// reenable an option
#! --enable bar

#! --if bar
bar 99;

// test predefined version option
#! --ifnot version-0.49+
let "this can't happen";
#! --else
let "we're good";
#! --endif

// open option section at eof gives error
